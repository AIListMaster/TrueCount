{% extends "layouts/base.html" %}

{% block content %}
<article class="lg:py-16">
  <div class="lg:px-8">
    <div class="mx-auto px-4 sm:px-6 md:max-w-2xl md:px-4 lg:px-0">
      <header class="flex flex-col">
        <div class="flex flex-col md:flex-row items-center gap-6">
          {% if item.image %}
          <div class="bg-indigo-300 rounded-lg overflow-hidden min-w-70">
            <img class="object-cover h-48 w-full" src="{{ item.image }}" alt="Photo of {{ item.title }}">
          </div>
          {% endif %}
          <div class="flex flex-col">
            <h1 class="mt-2 text-4xl font-bold text-slate-900">{{ item.title }}</h1>
            <time class="order-first font-mono text-sm leading-7 text-slate-500">
              {{ item.updated }}
            </time>
            {% if item.address %}
            <p class="mt-3 text-lg font-medium leading-8 text-slate-700">{{ item.address }}</p>
            {% endif %}
          </div>
        </div>
        {% if item.website or item.phone or item.category %}
        <div class="mt-6">
          <ul class="flex">
            {% if item.category %}
            <li class="mr-4">
              <a class="text-brand-red hover:text-primary transition-colors ease-in-out delay-150"
                 href="tel:{{ item.category }}">
                <i class="fa-solid fa-tags"></i>
                {{ item.category }}
              </a>
            </li>
            {% endif %}
            {% if item.phone %}
            <li class="mr-4">
              <a class="text-brand-red hover:text-primary transition-colors ease-in-out delay-150"
                 href="tel:{{ item.phone }}">
                <i class="fa-solid fa-phone"></i>
                {{ item.phone }}
              </a>
            </li>
            {% endif %}
            <!--              {% if item.website %}-->
            <!--              <li>-->
            <!--                <a class="text-brand-red hover:text-primary transition-colors ease-in-out delay-150" href="{{ item.website }}">-->
            <!--                  <i class="fa-solid fa-building"></i>-->
            <!--                  {{ item.website }}-->
            <!--                </a>-->
            <!--              </li>-->
            <!--              {% endif %}-->
          </ul>
        </div>
        {% endif %}
      </header>
      <hr class="my-12 border-slate-100">
    </div>
    <div class="prose prose-slate mt-14">
      <h2 class="mt-2 text-2xl mb-6 font-bold text-slate-900">Customer Reviews</h2>
      <div class="review-cards">
        {% for review in item.reviews %}
        {% if review.review %}
        <div class="review-card mb-4 w-full max-w-sm bg-white border border-whiter rounded-lg shadow">
          <div class="flex items-center justify-between p-4 border-b border-slate-100 bg-gray-2">
            <div class="contributor flex items-center">
              <img class="w-14 h-14 rounded-full mr-6 shadow" src="{{ review.contributor_pic }}=w250-h250"/>
              {% if review.contributor_name %}
              <h3 class="text-l font-semibold text-slate-700 capitalize">{{ review.contributor_name }}</h3>
              {% endif %}
            </div>
            <div class="sentiment">
              <i class="fa-solid fa-face-smile text-meta-6 text-2xl"></i>
            </div>
          </div>
          <div class="flex items-center justify-between p-4">
            <div class="text-sm text-justify text-slate-500 leading-5">
              {{ review.review }}
            </div>
          </div>
        </div>
        {% endif %}
        {% endfor %}
      </div>
    </div>
  </div>
</article>
{% endblock content %}

{% block javascripts %}
<script
  src="https://code.jquery.com/jquery-3.7.1.min.js"
  integrity="sha256-/JqT3SQfawRcv/BIHPThkBvs0OEvtFFmqPF/lYI/Cxo="
  crossorigin="anonymous"></script>
<script src="https://unpkg.com/masonry-layout@4/dist/masonry.pkgd.min.js"></script>
<script>
  $(document).ready(function () {
    $('.review-cards').masonry({
      itemSelector: '.review-card',
      columnWidth: 200
    });
  })
</script>
{% endblock javascripts %}